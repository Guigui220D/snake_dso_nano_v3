/*
 * drawing.c
 *
 *  Created on: 13 juin 2022
 *      Author: Guillaume
 */

#include "drawing.h"
#include "screen.h"

#define BGCOL1 0b0000001111100000
#define BGCOL2 0b0000011000000000
#define MENUCOL 0b0000000000001111

const unsigned short game_over_colors[] = {
		0x703f,
		0xffff,
		0x07ff
};

// RLE compressed
// 8 bits be like:
// 6 bits count (add + 1 for actual count), 2 bits pixel
const unsigned char game_over_sprite[2180] = {
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0x98,0x21,0xfc,
		0xfc,0x44,0x29,0xfc,0x21,0xfc,0x18,0x31,0xf0,0x3d,
		0xfc,0x00,0x41,0xe0,0x49,0xf8,0x49,0x04,0x15,0xb4,
		0x55,0xec,0x71,0xb0,0x59,0xe8,0x75,0x40,0x12,0x54,
		0x5d,0xe0,0x79,0x3c,0x1a,0x50,0x5d,0x58,0x32,0x50,
		0x79,0x38,0x22,0x4c,0x61,0x50,0x3a,0x48,0x7d,0x34,
		0x26,0x50,0x5d,0x4c,0x46,0x40,0x29,0x00,0x4d,0x30,
		0x2a,0x54,0x15,0x00,0x41,0x48,0x4a,0x38,0x29,0x08,
		0x49,0x2c,0x32,0x80,0x2d,0x48,0x4e,0x34,0x29,0x14,
		0x3d,0x2c,0x32,0x88,0x29,0x44,0x52,0x30,0x25,0x20,
		0x35,0x28,0x36,0x88,0x29,0x44,0x52,0x2c,0x29,0x34,
		0x21,0x28,0x3a,0x88,0x29,0x44,0x52,0x28,0x25,0x38,
		0x21,0x24,0x3e,0x88,0x29,0x48,0x4e,0x28,0x25,0x38,
		0x21,0x20,0x42,0x8c,0x25,0x6c,0x2e,0x20,0x29,0x38,
		0x21,0x20,0x46,0x88,0x25,0x70,0x2a,0x20,0x25,0x3c,
		0x21,0x20,0x46,0x8c,0x21,0x74,0x2a,0x1c,0x25,0x3c,
		0x21,0x1c,0x4a,0x8c,0x21,0x74,0x2a,0x1c,0x25,0x3c,
		0x21,0x1c,0x4e,0x88,0x21,0x78,0x2a,0x14,0x25,0x3c,
		0x25,0x1c,0x4e,0x88,0x21,0x78,0x2e,0x10,0x25,0x3c,
		0x25,0x1c,0x4e,0x88,0x25,0x78,0x2a,0x10,0x25,0x3c,
		0x25,0x18,0x26,0x00,0x26,0x30,0x35,0x1c,0x25,0x78,
		0x2e,0x0c,0x25,0x3c,0x25,0x18,0x26,0x04,0x22,0x2c,
		0x3d,0x18,0x25,0x7c,0x2a,0x0c,0x21,0x40,0x21,0x18,
		0x2a,0x04,0x26,0x24,0x45,0x14,0x25,0x68,0x3e,0x0c,
		0x21,0x40,0x21,0x18,0x2a,0x04,0x26,0x20,0x49,0x18,
		0x21,0x64,0x42,0x0c,0x21,0x40,0x21,0x18,0x26,0x08,
		0x2a,0x1c,0x49,0x18,0x21,0x60,0x4a,0x08,0x21,0x40,
		0x21,0x14,0x2a,0x08,0x2a,0x1c,0x49,0x18,0x21,0x60,
		0x4a,0x08,0x21,0x3c,0x25,0x14,0x26,0x10,0x26,0x1c,
		0x49,0x18,0x21,0x60,0x4a,0x04,0x25,0x3c,0x25,0x14,
		0x26,0x10,0x2a,0x18,0x45,0x1c,0x21,0x60,0x4a,0x04,
		0x25,0x3c,0x25,0x14,0x66,0x18,0x41,0x20,0x21,0x60,
		0x4a,0x04,0x25,0x3c,0x25,0x14,0x6a,0x14,0x21,0x3c,
		0x25,0x64,0x46,0x04,0x25,0x3c,0x21,0x18,0x6a,0x14,
		0x21,0x3c,0x25,0x68,0x42,0x04,0x21,0x40,0x21,0x18,
		0x6a,0x14,0x25,0x38,0x25,0x74,0x36,0x04,0x21,0x40,
		0x21,0x18,0x6a,0x14,0x25,0x38,0x25,0x84,0x26,0x04,
		0x21,0x40,0x21,0x18,0x6e,0x10,0x25,0x38,0x21,0x88,
		0x26,0x04,0x21,0x40,0x21,0x14,0x72,0x10,0x29,0x30,
		0x25,0x84,0x2a,0x04,0x21,0x40,0x21,0x14,0x72,0x14,
		0x2d,0x28,0x25,0x80,0x2e,0x04,0x21,0x40,0x21,0x14,
		0x72,0x14,0x39,0x14,0x2d,0x78,0x32,0x08,0x21,0x40,
		0x21,0x14,0x36,0x14,0x22,0x14,0x81,0x50,0x5a,0x08,
		0x21,0x40,0x21,0x14,0x2e,0x1c,0x22,0x18,0x79,0x50,
		0x5a,0x0c,0x21,0x44,0x19,0x18,0x22,0x28,0x22,0x18,
		0x79,0x4c,0x5e,0x10,0x19,0x4c,0x11,0x1c,0x22,0x28,
		0x22,0x1c,0x71,0x50,0x5a,0x18,0x11,0x88,0x1a,0x2c,
		0x22,0x20,0x69,0x54,0x56,0xc0,0x12,0x34,0x1a,0x28,
		0x61,0x58,0x52,0xfc,0x14,0x12,0x34,0x55,0x5c,0x4e,
		0xfc,0x6c,0x49,0x64,0x42,0xfc,0x80,0x35,0x70,0x36,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0x6c,0x25,0xfc,0x74,
		0x42,0x80,0x39,0x3c,0x32,0x98,0x11,0x40,0x4e,0x74,
		0x41,0x34,0x42,0x30,0x11,0x40,0x19,0x38,0x56,0x6c,
		0x49,0x2c,0x4a,0x28,0x19,0x38,0x21,0x34,0x5e,0x60,
		0x51,0x24,0x52,0x20,0x21,0x34,0x21,0x34,0x62,0x5c,
		0x55,0x20,0x52,0x20,0x21,0x34,0x21,0x2c,0x6e,0x54,
		0x5d,0x1c,0x52,0x20,0x25,0x2c,0x25,0x28,0x76,0x50,
		0x5d,0x1c,0x56,0x1c,0x25,0x28,0x29,0x24,0x7a,0x50,
		0x61,0x18,0x56,0x1c,0x29,0x24,0x29,0x1c,0x82,0x4c,
		0x29,0x04,0x31,0x1c,0x56,0x18,0x2d,0x20,0x29,0x18,
		0x2e,0x24,0x2e,0x4c,0x25,0x14,0x25,0x20,0x12,0x10,
		0x2a,0x1c,0x2d,0x18,0x29,0x18,0x32,0x2c,0x26,0x4c,
		0x25,0x14,0x29,0x48,0x2a,0x18,0x2d,0x14,0x29,0x18,
		0x36,0x30,0x22,0x4c,0x25,0x18,0x25,0x48,0x2a,0x1c,
		0x29,0x14,0x29,0x14,0x3a,0x30,0x22,0x4c,0x21,0x1c,
		0x25,0x4c,0x2a,0x18,0x2d,0x10,0x29,0x10,0x3a,0x34,
		0x22,0x4c,0x25,0x18,0x25,0x34,0x46,0x18,0x29,0x0c,
		0x29,0x14,0x36,0x38,0x22,0x4c,0x41,0x00,0x21,0x30,
		0x4e,0x18,0x29,0x08,0x25,0x18,0x32,0x3c,0x22,0x4c,
		0x69,0x2c,0x52,0x18,0x29,0x04,0x29,0x18,0x2a,0x44,
		0x22,0x4c,0x69,0x2c,0x56,0x18,0x29,0x00,0x29,0x18,
		0x22,0x4c,0x22,0x4c,0x69,0x2c,0x5e,0x10,0x29,0x00,
		0x25,0x1c,0x22,0x4c,0x22,0x50,0x65,0x2c,0x62,0x10,
		0x51,0x1c,0x22,0x4c,0x26,0x50,0x61,0x2c,0x66,0x0c,
		0x4d,0x20,0x22,0x4c,0x26,0x54,0x5d,0x30,0x62,0x10,
		0x49,0x20,0x26,0x48,0x26,0x58,0x59,0x34,0x5e,0x10,
		0x49,0x20,0x26,0x48,0x26,0x60,0x51,0x48,0x4a,0x14,
		0x41,0x24,0x26,0x4c,0x22,0x60,0x29,0x00,0x21,0x6c,
		0x26,0x14,0x41,0x24,0x2a,0x48,0x22,0x5c,0x2d,0x00,
		0x21,0x6c,0x26,0x14,0x41,0x28,0x26,0x44,0x26,0x5c,
		0x29,0x00,0x25,0x68,0x2a,0x18,0x3d,0x28,0x26,0x44,
		0x26,0x58,0x29,0x04,0x25,0x10,0x26,0x28,0x2e,0x18,
		0x39,0x2c,0x2a,0x40,0x26,0x54,0x2d,0x04,0x25,0x0c,
		0x86,0x18,0x39,0x30,0x2a,0x38,0x2a,0x50,0x2d,0x08,
		0x25,0x08,0x86,0x20,0x31,0x34,0x32,0x30,0x26,0x54,
		0x2d,0x08,0x21,0x0c,0x82,0x24,0x31,0x34,0x42,0x1c,
		0x2a,0x50,0x2d,0x0c,0x21,0x0c,0x7e,0x28,0x31,0x38,
		0x4a,0x08,0x32,0x4c,0x2d,0x10,0x21,0x0c,0x7a,0x30,
		0x29,0x40,0x82,0x50,0x29,0x14,0x21,0x0c,0x76,0x34,
		0x29,0x40,0x82,0x50,0x29,0x14,0x21,0x10,0x6e,0x38,
		0x29,0x44,0x7a,0x54,0x25,0x1c,0x19,0x18,0x66,0x40,
		0x21,0x4c,0x72,0x58,0x21,0x24,0x11,0x34,0x4a,0x44,
		0x21,0x50,0x6a,0x60,0x19,0x98,0x1e,0x50,0x19,0x5c,
		0x5e,0x68,0x11,0xfc,0x14,0x11,0x68,0x52,0xfc,0xfc,
		0x28,0x3e,0xfc,0xfc,0x38,0x2a,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xd0,0x05,0xb4,0x05,0xfc,0xa4,0x05,0xb4,
		0x05,0xfc,0xa4,0x05,0xb4,0x05,0xfc,0xa4,0x05,0xb4,
		0x05,0xfc,0xa4,0x05,0xb4,0x05,0xfc,0xa4,0x05,0xb4,
		0x05,0xfc,0x3c,0x01,0x24,0x05,0x14,0x11,0x04,0x05,
		0x58,0x15,0x18,0x05,0x1c,0x05,0x20,0x15,0x1c,0x11,
		0x04,0x01,0x14,0x1d,0x88,0x05,0x20,0x01,0x10,0x05,
		0x10,0x01,0x00,0x05,0x54,0x05,0x0c,0x05,0x14,0x05,
		0x1c,0x05,0x18,0x05,0x30,0x05,0x0c,0x09,0x30,0x09,
		0x84,0x01,0x20,0x01,0x10,0x01,0x18,0x09,0x50,0x05,
		0x14,0x05,0x14,0x01,0x1c,0x05,0x14,0x05,0x30,0x05,
		0x14,0x05,0x38,0x01,0x84,0x01,0x1c,0x01,0x10,0x05,
		0x1c,0x05,0x50,0x01,0x1c,0x01,0x14,0x05,0x18,0x05,
		0x14,0x01,0x34,0x01,0x1c,0x01,0x38,0x01,0x84,0x05,
		0x18,0x01,0x10,0x01,0x20,0x05,0x50,0x01,0x1c,0x05,
		0x14,0x01,0x18,0x05,0x14,0x01,0x34,0x01,0x1c,0x01,
		0x38,0x01,0x88,0x01,0x14,0x05,0x10,0x01,0x20,0x05,
		0x4c,0x05,0x20,0x01,0x14,0x05,0x14,0x05,0x10,0x05,
		0x34,0x01,0x1c,0x01,0x34,0x05,0x88,0x05,0x10,0x01,
		0x14,0x01,0x20,0x05,0x4c,0x2d,0x18,0x09,0x0c,0x05,
		0x10,0x1d,0x1c,0x01,0x1c,0x01,0x24,0x0d,0x94,0x01,
		0x0c,0x05,0x14,0x01,0x20,0x05,0x78,0x01,0x18,0x01,
		0x00,0x19,0x10,0x05,0x14,0x05,0x14,0x01,0x1c,0x01,
		0x18,0x0d,0xa0,0x01,0x0c,0x01,0x18,0x01,0x20,0x05,
		0x78,0x01,0x14,0x05,0x14,0x05,0x10,0x05,0x1c,0x01,
		0x10,0x01,0x1c,0x01,0x14,0x05,0xb0,0x01,0x08,0x01,
		0x18,0x05,0x1c,0x05,0x74,0x05,0x14,0x01,0x18,0x05,
		0x10,0x05,0x1c,0x01,0x10,0x01,0x1c,0x01,0x14,0x01,
		0xb4,0x01,0x04,0x01,0x20,0x01,0x1c,0x05,0x74,0x01,
		0x14,0x05,0x18,0x05,0x10,0x05,0x1c,0x01,0x10,0x01,
		0x1c,0x01,0x14,0x01,0xb4,0x05,0x00,0x01,0x24,0x01,
		0x18,0x05,0x70,0x05,0x14,0x01,0x1c,0x05,0x10,0x09,
		0x18,0x01,0x10,0x01,0x1c,0x01,0x14,0x01,0xb8,0x09,
		0x28,0x05,0x10,0x05,0x68,0x09,0x14,0x05,0x1c,0x05,
		0x10,0x01,0x04,0x01,0x10,0x05,0x10,0x01,0x1c,0x01,
		0x14,0x05,0xb4,0x05,0x34,0x19,0x50,0x19,0x1c,0x01,
		0x20,0x05,0x08,0x09,0x08,0x15,0x14,0x01,0x1c,0x01,
		0x1c,0x21,0x94,0x01,0xfc,0xfc,0x68,0x01,0xfc,0xfc,
		0x6c,0x01,0xfc,0xfc,0x6c,0x01,0xfc,0xfc,0x68,0x09,
		0xfc,0xfc,0x68,0x09,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xd8,0x2d,0x18,0x15,0x1c,0x25,0x10,0x2d,0xd0,0x25,
		0x80,0x01,0x24,0x01,0x14,0x05,0x0c,0x05,0x38,0x05,
		0x10,0x01,0x24,0x01,0xe0,0x05,0x90,0x01,0x24,0x01,
		0x10,0x05,0x18,0x01,0x34,0x05,0x10,0x01,0x24,0x01,
		0xe0,0x05,0x90,0x05,0x20,0x01,0x10,0x01,0x1c,0x05,
		0x30,0x05,0x10,0x05,0x20,0x01,0xe0,0x05,0x94,0x01,
		0x20,0x01,0x10,0x01,0x1c,0x05,0x30,0x05,0x14,0x01,
		0x20,0x01,0xe0,0x05,0x94,0x01,0x20,0x01,0x10,0x01,
		0x1c,0x05,0x30,0x05,0x14,0x01,0x20,0x01,0x5c,0x11,
		0x24,0x11,0x04,0x01,0x24,0x05,0x94,0x05,0x34,0x01,
		0x1c,0x01,0x34,0x05,0x14,0x05,0x78,0x05,0x0c,0x05,
		0x1c,0x05,0x0c,0x09,0x24,0x05,0x98,0x01,0x34,0x05,
		0x14,0x05,0x18,0x15,0x04,0x01,0x18,0x01,0x74,0x05,
		0x14,0x05,0x14,0x05,0x14,0x05,0x24,0x05,0x98,0x01,
		0x38,0x09,0x04,0x09,0x18,0x05,0x10,0x09,0x18,0x01,
		0x74,0x01,0x1c,0x01,0x14,0x01,0x1c,0x01,0x24,0x05,
		0x98,0x05,0x34,0x1d,0x18,0x01,0x18,0x05,0x18,0x05,
		0x70,0x01,0x1c,0x05,0x10,0x01,0x1c,0x01,0x24,0x05,
		0x9c,0x01,0x30,0x05,0x14,0x05,0x10,0x01,0x44,0x01,
		0x6c,0x05,0x20,0x01,0x10,0x01,0x1c,0x01,0x24,0x05,
		0x9c,0x01,0x2c,0x05,0x1c,0x05,0x0c,0x01,0x44,0x01,
		0x6c,0x05,0x20,0x01,0x10,0x01,0x1c,0x01,0x24,0x05,
		0x9c,0x05,0x28,0x01,0x24,0x01,0x0c,0x01,0x44,0x05,
		0x68,0x05,0x20,0x01,0x10,0x01,0x1c,0x01,0x24,0x05,
		0xa0,0x01,0x28,0x01,0x24,0x01,0x0c,0x01,0x24,0x01,
		0x1c,0x01,0x68,0x05,0x20,0x01,0x10,0x01,0x1c,0x01,
		0x24,0x05,0xa0,0x01,0x28,0x01,0x24,0x01,0x0c,0x01,
		0x24,0x01,0x1c,0x01,0x6c,0x01,0x1c,0x05,0x10,0x01,
		0x1c,0x01,0x24,0x05,0xa0,0x05,0x24,0x05,0x20,0x01,
		0x0c,0x05,0x1c,0x05,0x1c,0x05,0x68,0x01,0x1c,0x01,
		0x14,0x01,0x1c,0x01,0x24,0x05,0xa4,0x01,0x28,0x01,
		0x1c,0x05,0x10,0x01,0x1c,0x01,0x24,0x01,0x68,0x05,
		0x14,0x05,0x14,0x01,0x1c,0x01,0x24,0x05,0xa4,0x01,
		0x28,0x05,0x14,0x05,0x18,0x05,0x0c,0x05,0x28,0x01,
		0x6c,0x05,0x0c,0x05,0x18,0x01,0x1c,0x01,0x24,0x05,
		0xa4,0x05,0x2c,0x15,0x24,0x15,0x2c,0x05,0x70,0x11,
		0x1c,0x01,0x1c,0x01,0x14,0x25,0xfc,0x7c,0x35,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0x08,0x11,0xbc,0x01,0x0c,0x05,0x78,0x11,
		0xe8,0x01,0x10,0x01,0xb8,0x01,0x0c,0x05,0x74,0x01,
		0x0c,0x01,0xe8,0x01,0xd0,0x01,0x08,0x01,0x00,0x01,
		0x70,0x01,0x10,0x01,0xe8,0x01,0x1c,0x01,0x10,0x01,
		0x2c,0x0d,0x10,0x0d,0x00,0x01,0x0c,0x0d,0x08,0x01,
		0x08,0x01,0x00,0x01,0x2c,0x0d,0x0c,0x11,0x0c,0x01,
		0x10,0x01,0xec,0x05,0x14,0x01,0x10,0x01,0x28,0x05,
		0x08,0x01,0x08,0x01,0x0c,0x05,0x08,0x01,0x18,0x01,
		0x04,0x01,0x04,0x01,0x28,0x05,0x08,0x01,0x1c,0x01,
		0x04,0x01,0x14,0x01,0xf0,0x09,0x0c,0x01,0x0c,0x01,
		0x2c,0x01,0x10,0x01,0x04,0x01,0x10,0x01,0x08,0x01,
		0x18,0x01,0x04,0x01,0x04,0x01,0x28,0x01,0x10,0x01,
		0x1c,0x01,0x00,0x01,0x14,0x01,0xec,0x01,0x1c,0x01,
		0x08,0x01,0x2c,0x01,0x10,0x01,0x04,0x01,0x10,0x01,
		0x04,0x01,0x1c,0x01,0x00,0x01,0x08,0x01,0x28,0x01,
		0x10,0x01,0x10,0x09,0x04,0x01,0x14,0x01,0xe8,0x01,
		0x20,0x01,0x04,0x01,0x30,0x01,0x10,0x01,0x04,0x01,
		0x10,0x01,0x08,0x15,0x04,0x01,0x00,0x01,0x08,0x01,
		0x28,0x01,0x10,0x01,0x08,0x05,0x14,0x01,0x10,0x01,
		0xe8,0x01,0x24,0x01,0x00,0x01,0x30,0x01,0x10,0x01,
		0x04,0x01,0x10,0x01,0x04,0x01,0x10,0x01,0x04,0x05,
		0x0c,0x01,0x28,0x01,0x10,0x01,0x04,0x01,0x1c,0x01,
		0x10,0x01,0xe8,0x05,0x20,0x01,0x00,0x01,0x30,0x05,
		0x08,0x01,0x08,0x01,0x10,0x01,0x08,0x01,0x0c,0x01,
		0x04,0x05,0x0c,0x01,0x28,0x05,0x08,0x01,0x08,0x01,
		0x1c,0x05,0x0c,0x01,0xec,0x15,0x10,0x01,0x38,0x0d,
		0x0c,0x01,0x10,0x01,0x00,0x05,0x00,0x0d,0x08,0x01,
		0x10,0x01,0x2c,0x0d,0x10,0x15,0x0c,0x11,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,
		0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xfc,0xe0,
};

const unsigned char font[7680] = {
        0x00,0xfe,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0xfe, // err
         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, // ' '
         0x00,0x78,0x78,0x78,0x30,0x30,0x30,0x00,0x30,0x30, // '!'
         0x00,0xee,0xee,0xcc,0xcc,0x00,0x00,0x00,0x00,0x00, // '"'
         0x00,0x6c,0xfe,0xfe,0x6c,0x6c,0x6c,0xfe,0xfe,0x6c, // '#'
         0x00,0x3c,0x7e,0xe0,0xfe,0xf0,0xfe,0xe0,0x7e,0x3c, // '$'
         0x00,0x66,0x6e,0x0c,0x1c,0x18,0x38,0x30,0x76,0x66, // '%'
         0x00,0x78,0xfc,0xcc,0xcc,0x72,0x4e,0xcc,0xfe,0x76, // '&'
         0x00,0x70,0x70,0x60,0x60,0x00,0x00,0x00,0x00,0x00, // '''
         0x00,0x18,0x38,0x70,0x60,0x60,0x60,0x70,0x38,0x18, // '('
         0x00,0x60,0x70,0x38,0x18,0x18,0x18,0x38,0x70,0x60, // ')'
         0x00,0x30,0x30,0xfe,0xfe,0x38,0x7c,0xee,0xc6,0x00, // '*'
         0x00,0x00,0x30,0x30,0xfc,0xfc,0x30,0x30,0x00,0x00, // '+'
         0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x38,0x30,0x20, // ','
         0x00,0x00,0x00,0x00,0xfe,0xfe,0x00,0x00,0x00,0x00, // '-'
         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30, // '.'
         0x00,0x0c,0x0c,0x1c,0x18,0x38,0x30,0x70,0x60,0x60, // '/'
         0x00,0x7c,0xfe,0xce,0xde,0xd6,0xf6,0xe6,0xfe,0x7c, // '0'
         0x00,0x0c,0x1c,0x3c,0x7c,0x6c,0x0c,0x0c,0x3e,0x3e, // '1'
         0x00,0x3c,0x7e,0xe6,0xc6,0x1e,0x38,0x70,0xfe,0xfe, // '2'
         0x00,0x7c,0xfe,0xc6,0x1e,0x3c,0x06,0xc6,0xfe,0x7c, // '3'
         0x00,0x0c,0x1c,0x3c,0x7c,0xec,0xcc,0xfe,0xfe,0x0c, // '4'
         0x00,0xfe,0xfe,0xc0,0xf8,0xfc,0x1e,0x0e,0xfe,0xfc, // '5'
         0x00,0x3c,0x7e,0xe6,0xc0,0xdc,0xfe,0xe6,0xfe,0x7c, // '6'
         0x00,0xfe,0xfe,0x06,0x0e,0x0c,0x1c,0x18,0x38,0x30, // '7'
         0x00,0x7c,0xfe,0xc6,0xfe,0x7c,0xc6,0xc6,0xfe,0x7c, // '8'
         0x00,0x7c,0xfe,0xc6,0xfe,0x7e,0x06,0x0e,0x7e,0x7c, // '9'
         0x00,0x00,0x30,0x30,0x00,0x00,0x30,0x30,0x00,0x00, // ':'
         0x00,0x00,0x30,0x30,0x00,0x00,0x30,0x30,0x70,0x60, // ';'
         0x00,0x06,0x1e,0x7c,0xf0,0xf0,0x7c,0x1e,0x06,0x00, // '<'
         0x00,0x00,0xfe,0xfe,0x00,0x00,0xfe,0xfe,0x00,0x00, // '='
         0x00,0xc0,0xf0,0x7c,0x1e,0x1e,0x7c,0xf0,0xc0,0x00, // '>'
         0x00,0x7c,0xfe,0xc6,0x1e,0x3c,0x30,0x00,0x30,0x30, // '?'
         0x00,0x3c,0x7e,0xc6,0xfa,0xaa,0xbc,0xc2,0x7e,0x3c, // '@'
         0x00,0x38,0x7c,0xee,0xc6,0xc6,0xfe,0xee,0xc6,0xc6, // 'A'
         0x00,0xf8,0xfe,0xc6,0xfe,0xfc,0xce,0xc6,0xfe,0xf8, // 'B'
         0x00,0x3c,0x7e,0xe6,0xc0,0xc0,0xc0,0xe6,0x7e,0x3c, // 'C'
         0x00,0xf8,0xfc,0xce,0xc6,0xc6,0xc6,0xce,0xfc,0xf8, // 'D'
         0x00,0xfe,0xfe,0xc0,0xfc,0xfc,0xc0,0xc0,0xfe,0xfe, // 'E'
         0x00,0xfe,0xfe,0xc0,0xc0,0xf8,0xf8,0xc0,0xc0,0xc0, // 'F'
         0x00,0x3c,0x7e,0xe6,0xc0,0xce,0xce,0xe6,0x7e,0x3c, // 'G'
         0x00,0xc6,0xc6,0xc6,0xc6,0xfe,0xfe,0xc6,0xc6,0xc6, // 'H'
         0x00,0xfe,0xfe,0x30,0x30,0x30,0x30,0x30,0xfe,0xfe, // 'I'
         0x00,0xfe,0xfe,0x0c,0x0c,0x0c,0xcc,0xcc,0xfc,0x78, // 'J'
         0x00,0xc6,0xc6,0xce,0xdc,0xf8,0xf8,0xdc,0xce,0xc6, // 'K'
         0x00,0xc0,0xc0,0xc0,0xc0,0xc0,0xc0,0xc0,0xfe,0xfe, // 'L'
         0x00,0xc6,0xc6,0xc6,0xee,0xfe,0xfe,0xd6,0xc6,0xc6, // 'M'
         0x00,0xe6,0xe6,0xf6,0xf6,0xfe,0xde,0xde,0xce,0xce, // 'N'
         0x00,0x7c,0xfe,0xc6,0xc6,0xc6,0xc6,0xc6,0xfe,0x7c, // 'O'
         0x00,0xfc,0xfe,0xc6,0xc6,0xfe,0xfc,0xc0,0xc0,0xc0, // 'P'
         0x00,0x78,0xfc,0xcc,0xcc,0xcc,0xcc,0xdc,0xfe,0x7e, // 'Q'
         0x00,0xfc,0xfe,0xc6,0xc6,0xfe,0xfc,0xce,0xc6,0xc6, // 'R'
         0x00,0x3e,0x7e,0xe0,0xc0,0xfc,0x7e,0x06,0xfe,0xfc, // 'S'
         0x00,0xfe,0xfe,0x30,0x30,0x30,0x30,0x30,0x30,0x30, // 'T'
         0x00,0xc6,0xc6,0xc6,0xc6,0xc6,0xc6,0xee,0xfe,0x7c, // 'U'
         0x00,0xc6,0xc6,0xc6,0xc6,0xc6,0xee,0x6c,0x7c,0x38, // 'V'
         0x00,0xc6,0xc6,0xc6,0xc6,0xd6,0xfe,0xfe,0xfe,0x7c, // 'W'
         0x00,0xc6,0xc6,0xc6,0xee,0x7c,0x7c,0xee,0xc6,0xc6, // 'X'
         0x00,0xc6,0xc6,0xc6,0xc6,0xfe,0x7c,0x30,0x30,0x30, // 'Y'
         0x00,0xfe,0xfe,0x06,0x1e,0x7c,0xf0,0xc0,0xfe,0xfe, // 'Z'
         0x00,0x78,0x78,0x60,0x60,0x60,0x60,0x60,0x78,0x78, // '['
         0x00,0x60,0x60,0x70,0x30,0x38,0x18,0x1c,0x0c,0x0c, // '\'
         0x00,0x78,0x78,0x18,0x18,0x18,0x18,0x18,0x78,0x78, // ']'
         0x00,0x38,0x7c,0xee,0xc6,0x82,0x00,0x00,0x00,0x00, // '^'
         0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xfe,0xfe, // '_'
         0x00,0xe0,0x78,0x38,0x00,0x00,0x00,0x00,0x00,0x00, // '`'
         0x00,0x00,0x76,0xfe,0xde,0xce,0xc6,0xce,0xfe,0x76, // 'a'
         0x00,0xc0,0xc0,0xdc,0xfe,0xf6,0xe6,0xf6,0xfe,0xdc, // 'b'
         0x00,0x00,0x3c,0x7e,0xe6,0xc0,0xc0,0xe6,0x7e,0x3c, // 'c'
         0x00,0x06,0x06,0x76,0xfe,0xde,0xce,0xde,0xfe,0x76, // 'd'
         0x00,0x00,0x7c,0xfe,0xc6,0xfe,0xfc,0xc0,0xfe,0x7c, // 'e'
         0x00,0x00,0x3e,0x7e,0xe0,0xc0,0xf8,0xf8,0xc0,0xc0, // 'f'
         0x00,0x00,0x7c,0xfe,0xc6,0xfe,0x7c,0x0c,0xfe,0xfe, // 'g'
         0x00,0x00,0xc0,0xc0,0xc0,0xfc,0xfe,0xee,0xc6,0xc6, // 'h'
         0x00,0x00,0x78,0x78,0x00,0x30,0x30,0x38,0x3c,0x1c, // 'i'
         0x00,0x00,0x7c,0x7c,0x00,0x0c,0x0c,0xdc,0xfc,0x78, // 'j'
         0x00,0x00,0xc0,0xc0,0xce,0xde,0xf8,0xf8,0xde,0xce, // 'k'
         0x00,0x00,0x60,0x60,0x60,0x60,0x60,0x76,0x7e,0x3c, // 'l'
         0x00,0x00,0x00,0x7c,0xfe,0xfe,0xd6,0xc6,0xc6,0xc6, // 'm'
         0x00,0x00,0x00,0xf8,0xfc,0xce,0xc6,0xc6,0xc6,0xc6, // 'n'
         0x00,0x00,0x38,0x7c,0xee,0xc6,0xc6,0xee,0x7c,0x38, // 'o'
         0x00,0x00,0x78,0xfc,0xee,0xee,0xfc,0xf8,0xc0,0xc0, // 'p'
         0x00,0x00,0x38,0x7c,0xee,0xc6,0xe6,0x7e,0x3e,0x06, // 'q'
         0x00,0x00,0x3e,0x7e,0xf6,0xe0,0xc0,0xc0,0xc0,0xc0, // 'r'
         0x00,0x00,0x3e,0x7e,0xe0,0xfc,0x7e,0x06,0xfe,0x7c, // 's'
         0x00,0x60,0x60,0xf8,0xf8,0x60,0x60,0x70,0x7c,0x3c, // 't'
         0x00,0x00,0x00,0xcc,0xcc,0xcc,0xcc,0xec,0x7c,0x3c, // 'u'
         0x00,0x00,0x00,0xcc,0xcc,0xcc,0xcc,0xfc,0x78,0x30, // 'v'
         0x00,0x00,0x00,0xc6,0xc6,0xc6,0xd6,0xfe,0xfe,0x7c, // 'w'
         0x00,0x00,0x00,0xc6,0xee,0x7c,0x38,0x7c,0xee,0xc6, // 'x'
         0x00,0x00,0xc6,0xc6,0xc6,0xfe,0x7e,0x0c,0x7c,0x78, // 'y'
         0x00,0x00,0x00,0xfe,0xfe,0x0c,0x78,0x60,0xfe,0xfe, // 'z'
         0x00,0x0c,0x3c,0x38,0x30,0xf0,0xf0,0x38,0x1c,0x0c, // '{'
         0x00,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x30, // '|'
         0x00,0xc0,0xf0,0x70,0x30,0x3c,0x3c,0x70,0xe0,0xc0, // '}'
         0x00,0x00,0x00,0x00,0x60,0xf2,0x9e,0x0c,0x00,0x00, // '~'

};

void draw_background() {
	screen_reset_window();
	screen_start_drawing();
	for (int i = 0; i < 320; i++) {
		for (int j = 0; j < 240; j++) {
			if ((j & 8) != ((i & 32) >> 2)) {
				screen_param(BGCOL1);
			} else {
				screen_param(BGCOL2);
			}

		}
	}
	screen_command(0);
}

void redraw_bg(unsigned short x1, unsigned short y1, unsigned short x2, unsigned short y2) {
	screen_set_window(x1, y1, x2, y2);
	screen_start_drawing();
	for (unsigned short y = y1; y <= y2; y++) {
		for (unsigned short x = x1; x <= x2; x++) {
			if ((x & 8) != ((y & 32) >> 2)) {
				screen_param(BGCOL1);
			} else {
				screen_param(BGCOL2);
			}
		}
	}
}

void draw_menu(int selected) {
	screen_set_window(42, 42, 197, 277);
	screen_start_drawing();

	for (int i = 0; i < 2180; i++) {
		unsigned char data = game_over_sprite[i];
		GPIOE->ODR = game_over_colors[data & 0b11];
		unsigned short count = 1 + (data >> 2);
		for (unsigned short j = 0; j < count; j++) {
			GPIOD->BSRR = GPIOD->BRR = sWR__Pin;
		}
	}
}

void erase_menu() {
	redraw_bg(40, 40, 199, 279);
}

void draw_char(unsigned short x, unsigned short y, char c) {
	screen_set_window(x, y, x + 7, y + 10);
	if (c < 32 || c >= 127)
		c = 31;
	const unsigned char * ch = font + (10 * (c - 31));
	screen_start_drawing();
	for (int i = 0; i < 10; i++) {
		char data = ch[i];
		for (int j = 0; j < 8; j++) {
			char c = data & 1;
			data >>= 1;
			screen_param(c ? 0x07ff : 0x703f);
		}
	}
}

void draw_string(unsigned short x, unsigned short y, const char * str){
	for (;*str;str++) {
		draw_char(232 - x, y, *str);
		x += 8;
	}
}

void draw_score(unsigned int i) {
	unsigned short x = 3;
	while (i > 0) {
		unsigned int next = i / 10;
		draw_char(x, 3, '0' + (i - next * 10));
		i = next;
		x += 8;
	}
}

void draw_header() {
	screen_set_window(0, 0, 239, 15);
	screen_start_drawing();
	GPIOE->ODR = 0x703f;
	for (int i = 0; i < 240 * 16; i++) {
		GPIOD->BSRR = GPIOD->BRR = sWR__Pin;
	}
	draw_string(3, 3, "Snake on your scope!");
}
